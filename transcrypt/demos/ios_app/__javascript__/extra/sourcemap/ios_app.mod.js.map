{
	"version": 3,
	"file": "/mnt/D/activ_tosh/geatec/transcrypt/qquick/Transcrypt/transcrypt/demos/ios_app/__javascript__/ios_app.mod.js",
	"sources": [
		"/mnt/D/activ_tosh/geatec/transcrypt/qquick/Transcrypt/transcrypt/demos/ios_app/ios_app.py"
	],
	"sourcesContent": [
		"import random\n\nclass Dice:\n    def __init__ (self):\n        document.body.addEventListener ('touchstart', lambda event: event.preventDefault ())\n        document.body.addEventListener ('mousedown', lambda event: event.preventDefault ())\n        document.body.style.margin = 0\n        document.body.style.overflow = 'hidden';\n    \n        self.all = document.createElement ('div')\n        self.all.style.color = 'white'\n        self.all.style.backgroundColor = 'black'\n        self.all.style.height = '100%'\n        self.all.style.width = '100%'\n        self.all.style.padding = 0\n        self.all.style.margin = 0\n        document.body.appendChild (self.all)\n        \n        self.dices = []\n        \n        for index in range (6):\n            dice = document.createElement ('div')\n            dice.normalColor = '#770000' if index < 3 else '#0000ff'\n            dice.style.position = 'absolute'\n            dice.style.backgroundColor = dice.normalColor\n            dice.addEventListener ('touchstart', (lambda aDice: lambda: self.roll (aDice)) (dice))  # Returns inner lambda\n            dice.addEventListener ('mousedown', (lambda aDice: lambda: self.roll (aDice)) (dice))\n            self.dices.append (dice)\n            self.all.appendChild (dice)\n            \n            dice.inner = document.createElement ('div')\n            dice.inner.setAttribute ('unselectable', 'on')\n            dice.inner.style.fontWeight = 'bold'\n            dice.inner.style.textAlign = 'center'\n            dice.inner.style.position = 'absolute'\n            dice.inner.innerHTML = '?'\n            dice.appendChild (dice.inner)\n            \n        self.banner = document.createElement ('div')\n        self.banner.style.position = 'absolute'\n        self.banner.style.cursor = 'pointer'\n        self.banner.addEventListener ('touchstart', self.gotoTranscryptSite)\n        self.banner.addEventListener ('mousedown', self.gotoTranscryptSite)\n        self.banner.style.fontFamily = 'arial'\n        self.banner.innerHTML = (\n            '<span id=\"bannerLarge\"><font color=\"777777\">www.<b><i>' +\n            '<font color=\"ff4422\">T<font color=\"ffb000\">r<font color=\"228822\">a<font color=\"3366ff\">n' +\n            '<font color=\"ff4422\">s<font color=\"ffb000\">c<font color=\"228822\">r<font color=\"3366ff\">y<font color=\"ffb000\">p<font color=\"228822\">t' +\n            '</i></b><font color=\"777777\">.org<font size={}><font color=\"cccccc\"></span>' +\n            '<span id=\"bannerSmall\"><i> Write your apps in Python for free!</i></span>'\n        )\n        self.all.appendChild (self.banner)\n\n        self.bannerLarge = document.getElementById ('bannerLarge')\n        self.bannerSmall = document.getElementById ('bannerSmall')\n        \n        self.audio = __new__ (Audio ('ios_app.mp3'))\n        \n        window.onresize = self.rightSize\n        self.rightSize ()\n        \n    def gotoTranscryptSite (self):\n        document.location.href = 'http://www.transcrypt.org'\n        \n    def roll (self, dice):\n        frameIndex = 10\n\n        self.audio.play ()\n        \n        def frame ():\n            nonlocal frameIndex\n            frameIndex -= 1\n            \n            dice.inner.innerHTML = random.randint (1, 6)\n\n            if frameIndex:\n                dice.style.color = random.choice (('red', 'green', 'blue', 'yellow'))\n                setTimeout (frame, 100)\n            else:\n                dice.style.backgroundColor = dice.normalColor\n                dice.style.color = 'white'\n                \n        frame ()\n    \n    def rightSize (self):\n        self.pageWidth = window.innerWidth\n        self.pageHeight = window.innerHeight\n        portrait = self.pageHeight > self.pageWidth\n        \n        for index, dice in enumerate (self.dices):\n            if self.pageHeight > self.pageWidth:    # Portrait\n                dice.style.height = 0.3 * self.pageHeight\n                dice.style.width = 0.4 * self.pageWidth\n                dice.style.top = (0.03 + (index if index < 3 else index - 3) * 0.32) * self.pageHeight\n                dice.style.left = (0.06 if index < 3 else 0.54) * self.pageWidth\n                \n                charBoxSide = 0.3 * self.pageHeight\n                dice.inner.style.top = 0.15 * self.pageHeight - 0.6 * charBoxSide\n                dice.inner.style.left = 0.2 * self.pageWidth - 0.5 * charBoxSide\n\n                self.banner.style.top = 0.975 * self.pageHeight\n                self.banner.style.left = 0.06 * self.pageWidth              \n                self.bannerLarge.style.fontSize = 0.017 * self.pageHeight\n                self.bannerSmall.style.fontSize = 0.014 * self.pageHeight\n            else:                                   # Landscape\n                dice.style.height = 0.4 * self.pageHeight\n                dice.style.width = 0.3 * self.pageWidth\n                dice.style.top = (0.06 if index < 3 else 0.54) * self.pageHeight\n                dice.style.left = (0.03 + (index if index < 3 else index - 3) * 0.32) * self.pageWidth\n                \n                charBoxSide = 0.4 * self.pageHeight\n                dice.inner.style.top = 0.2 * self.pageHeight - 0.6 * charBoxSide\n                dice.inner.style.left = 0.15 * self.pageWidth - 0.5 * charBoxSide\n                \n                self.banner.style.top = 0.95 * self.pageHeight\n                self.banner.style.left = 0.03 * self.pageWidth\n                self.bannerLarge.style.fontSize = 0.015 * self.pageWidth\n                self.bannerSmall.style.fontSize = 0.012 * self.pageWidth\n                \n            dice.inner.style.height = charBoxSide\n            dice.inner.style.width = charBoxSide\n            dice.inner.style.fontSize = charBoxSide\n            \ndice = Dice ()\n"
	],
	"mappings": "AAAA;AA2HA;AA3HA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAOA;AAEA;AACA;AAEA;AAEA;AACA;AAAA;AAEA;AACA;AAAA;AAEA;AACA;AAEA;AAEA;AAAA;AAIA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AAAA;AAEA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA"
}