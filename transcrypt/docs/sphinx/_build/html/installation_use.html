<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2. Getting started &mdash; Transcrypt 3.5.154 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '3.5.154',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Transcrypt 3.5.154 documentation" href="index.html" />
    <link rel="next" title="3. Special facilities" href="special_facilities.html" />
    <link rel="prev" title="1. Transcrypt: what and why" href="what_why.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="special_facilities.html" title="3. Special facilities"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="what_why.html" title="1. Transcrypt: what and why"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Transcrypt 3.5.154 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="getting-started">
<h1>2. Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installation">
<h2>2.1. Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Transcrypt is currently tested under Windows, Linux and OSX, with Chrome, Internet Explorer and Firefox. To be able to use it, Python 3.5 has to be installed. After that, install <em>virtualenv</em> as explained in <a class="reference external" href="https://www.dabapps.com/blog/introduction-to-pip-and-virtualenv-python/">Jamie Matthews very clear and brief introduction</a>. Be sure to install virtualenv for the right Python version, by using the right <em>pip</em>. For each Transcrypt project (or group of projects using the same Transcrypt version) create an environment as described in the referenced introduction. To install Trancrypt into that environment, <em>activate</em> the environment as also described there, and then type:</p>
<p><em>pip install transcrypt</em></p>
<p>from the command prompt. This is the recommended way to install Transcrypt. It is flexible and sets the proper access rights.</p>
<p>Alternatively, for manual installation under Windows or Linux, follow the steps below:</p>
<ol class="arabic simple">
<li>Download the Transcrypt zip and unpack it anywhere you like</li>
<li>Add <em>../Transcrypt-&lt;version&gt;/transcrypt</em> to your system path</li>
</ol>
<p>N.B. If you install Transcrypt manually, Trancrypt is started by typing <em>run_transcrypt</em> rather than <em>transcrypt</em>. This allows a pip installed Transcrypt and a manually installed Transcrypt to by used side by side selectively.</p>
<p>N.B.2 If you also use Numscrypt under Linux or OSX, use the MiniConda installer rather than <em>virtualenv</em>, as described in the Numscrypt documentation, since it will allow you to obtain the right version of NumPy.</p>
<p>You can test your installation as follows (replacing <em>transcrypt</em> by <em>run_transcrypt</em> if you installed manually rather than with pip):</p>
<ol class="arabic simple">
<li>Go to directory <em>../Transcrypt-&lt;version&gt;/transcrypt/development/automated_tests/transcrypt</em></li>
<li>From the command prompt run <em>transcrypt -b autotest.py</em>. This will compile the autotests into file <em>autotest.js</em> and put it into the <em>__javascript__</em> subdirectory. Do NOT go to that directory (there&#8217;s no need, stay where you went at point 4)</li>
<li>From the command prompt run <em>transcrypt -r autotest.py</em>. This will run the autotests with CPython creating file <em>autotest.html</em> that refers to the generated <em>autotest.js</em> file</li>
<li>Load the autotest.html into your browser, e.g. by clicking on it (tests were done with Chrome). It will load <em>autotest.js</em>, run it and compare the output with what was generated by CPython. It should report no errors</li>
</ol>
<p>To experiment with Transcrypt yourself:</p>
<ol class="arabic simple">
<li>Create a directory for your experiments</li>
<li>Make your own thing there, e.g. <em>experiment1.py</em></li>
<li>Compile with <em>transcrypt -b experiment1.py</em></li>
<li>Make an HTML page that will load your code in the browser. Use the HTML file generated by the autotest as an example of how to do that</li>
<li>Load and run the HTML + JS</li>
</ol>
<p>You may also want to try the demo&#8217;s.</p>
<div class="section" id="troubleshooting-checklist">
<h3>2.1.1. Troubleshooting checklist<a class="headerlink" href="#troubleshooting-checklist" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Transcrypt was installed using <em>pip</em>, but <em>import transcrypt</em> fails. Transcrypt isn&#8217;t a library but a compiler. Install and run it as described in this chapter.</li>
<li>Transcrypt reports an error containing the word &#8216;java&#8217;. Transcrypt produces both prettyfied and minified JavaScript output. For the minification it makes use of the Google Closure Compiler, which is included in the distribution and requires Java to run. You can check proper installation of Java by typing the word <em>java</em> on the command line. This should give you a list of options: <em>Usage: java [-options] class []args...]</em> and so on. If you can&#8217;t or won&#8217;t install Java, you can run Transcrypt without minification by using the <em>-n</em> command line switch.</li>
<li>The static checker doesn&#8217;t find all errors it could. The static checks, performed by the PyFlakes package that&#8217;s part of the distribution, are of a &#8216;light&#8217; variety. Style checks and false positives are avoided. The accent is on finding undefined identifiers and unused variables.</li>
</ol>
</div>
</div>
<div class="section" id="your-first-transcrypt-program">
<h2>2.2. Your first Transcrypt program<a class="headerlink" href="#your-first-transcrypt-program" title="Permalink to this headline">¶</a></h2>
<p>Open a command prompt in the <em>demos/hello</em> directory and type <em>transcrypt hello.py</em>.
Then click on <em>hello.html</em> to load it into your browser.</p>
<p>After clicking on both buttons a few times, take a look at <em>hello.html</em>.
As you can see, eventhandlers are connected to the buttons exactly as you would do with JavaScript.</p>
<p>Then look at <em>hello.py</em>.
Note that JavaScript functions like document.getElementById can be called from Python exactly as you would call them from JavaScript, but with Python data.</p>
<p>The minified JavaScript file <em>including the Transcrypt runtime</em> is only 10kB. With non-trivial programs this overhead becomes negligible. Transcrypt applications in themselves don&#8217;t need any external files. Of course you can use extensive JavaScript libraries served by content delivery networks as you normally would. But you can also make very compact stand alone applications. The most efficient thing to do is pack all functionality for a page in a single Transcrypt program. Note that the source can consist of many modules if needed and many callback entrypoints can be provided. But it is <em>one</em> stateful application, just like it would be on the desktop.</p>
<div class="literal-block-wrapper container" id="in-hello-html-python-handlers-are-attached-directly-to-the-onclick-events">
<div class="code-block-caption"><span class="caption-text">In hello.html, Python handlers are attached directly to the onclick events</span><a class="headerlink" href="#in-hello-html-python-handlers-are-attached-directly-to-the-onclick-events" title="Permalink to this code">¶</a></div>
<div class="highlight-python"><div class="highlight"><pre>&lt;script src=&quot;__javascript__/hello.js&quot;&gt;&lt;/script&gt;
&lt;h2&gt;Hello demo&lt;/h2&gt;

&lt;p&gt;
&lt;div id = &quot;greet&quot;&gt;...&lt;/div&gt;
&lt;button onclick=&quot;hello.solarSystem.greet ()&quot;&gt;Click me repeatedly!&lt;/button&gt;

&lt;p&gt;
&lt;div id = &quot;explain&quot;&gt;...&lt;/div&gt;
&lt;button onclick=&quot;hello.solarSystem.explain ()&quot;&gt;And click me repeatedly too!&lt;/button&gt;
</pre></div>
</div>
</div>
<div class="literal-block-wrapper container" id="in-hello-py-javascript-function-document-getelementbyid-is-called-directly-from-python-using-plain-python-values">
<div class="code-block-caption"><span class="caption-text">In hello.py, JavaScript function document.getElementById is called directly from Python, using plain Python values</span><a class="headerlink" href="#in-hello-py-javascript-function-document-getelementbyid-is-called-directly-from-python-using-plain-python-values" title="Permalink to this code">¶</a></div>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">chain</span>

<span class="k">class</span> <span class="nc">SolarSystem</span><span class="p">:</span>
    <span class="n">planets</span> <span class="o">=</span> <span class="p">[</span><span class="n">chain</span> <span class="p">(</span><span class="n">planet</span><span class="p">,</span> <span class="p">(</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,))</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">planet</span> <span class="ow">in</span> <span class="nb">enumerate</span> <span class="p">((</span>
        <span class="p">(</span><span class="s">&#39;Mercury&#39;</span><span class="p">,</span> <span class="s">&#39;hot&#39;</span><span class="p">,</span> <span class="mi">2240</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;Venus&#39;</span><span class="p">,</span> <span class="s">&#39;sulphurous&#39;</span><span class="p">,</span> <span class="mi">6052</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;Earth&#39;</span><span class="p">,</span> <span class="s">&#39;fertile&#39;</span><span class="p">,</span> <span class="mi">6378</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;Mars&#39;</span><span class="p">,</span> <span class="s">&#39;reddish&#39;</span><span class="p">,</span> <span class="mi">3397</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;Jupiter&#39;</span><span class="p">,</span> <span class="s">&#39;stormy&#39;</span><span class="p">,</span> <span class="mi">71492</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;Saturn&#39;</span><span class="p">,</span> <span class="s">&#39;ringed&#39;</span><span class="p">,</span> <span class="mi">60268</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;Uranus&#39;</span><span class="p">,</span> <span class="s">&#39;cold&#39;</span><span class="p">,</span> <span class="mi">25559</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;Neptune&#39;</span><span class="p">,</span> <span class="s">&#39;very cold&#39;</span><span class="p">,</span> <span class="mi">24766</span><span class="p">)</span> 
    <span class="p">))]</span>
    
    <span class="n">lines</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s">&#39;{} is a {} planet&#39;</span><span class="p">,</span>
        <span class="s">&#39;The radius of {} is {} km&#39;</span><span class="p">,</span>
        <span class="s">&#39;{} is planet nr. {} counting from the sun&#39;</span>
    <span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lineIndex</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="k">def</span> <span class="nf">greet</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">planet</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">planets</span> <span class="p">[</span><span class="nb">int</span> <span class="p">(</span><span class="n">Math</span><span class="o">.</span><span class="n">random</span> <span class="p">()</span> <span class="o">*</span> <span class="nb">len</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">planets</span><span class="p">))]</span>
        <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span> <span class="p">(</span><span class="s">&#39;greet&#39;</span><span class="p">)</span> <span class="o">.</span><span class="n">innerHTML</span> <span class="o">=</span> <span class="s">&#39;Hello {}&#39;</span><span class="o">.</span><span class="n">format</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">planet</span> <span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">explain</span> <span class="p">()</span>
        
    <span class="k">def</span> <span class="nf">explain</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span> <span class="p">(</span><span class="s">&#39;explain&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">innerHTML</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">lineIndex</span><span class="p">]</span> <span class="o">.</span><span class="n">format</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">planet</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">planet</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">lineIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lineIndex</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lineIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">3</span>
        
<span class="n">solarSystem</span> <span class="o">=</span> <span class="n">SolarSystem</span> <span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="using-sourcemaps-and-annotated-target-code">
<h2>2.3. Using sourcemaps and annotated target code<a class="headerlink" href="#using-sourcemaps-and-annotated-target-code" title="Permalink to this headline">¶</a></h2>
<div class="section" id="sourcemaps">
<h3>2.3.1. Sourcemaps<a class="headerlink" href="#sourcemaps" title="Permalink to this headline">¶</a></h3>
<p>Sourcemaps enable debugging from the original Python source code rather then from the generated JavaScript. Transcrypt supports the use of single- and multi-level sourcemaps, using the <em>-m</em> switch. This means that you can source-level debug both non-minified and minified JavaScript target code. Sourcemaps are routinely tested for Google Chrome only, both under Windows and Linux, but they also have been observed to work for Firefox. Combined with the high readability of the JavaScript code generated by Transcrypt, this enables efficient debugging for real-world projects consisting of many modules.</p>
</div>
<div class="section" id="annotated-target-code">
<h3>2.3.2. Annotated target code<a class="headerlink" href="#annotated-target-code" title="Permalink to this headline">¶</a></h3>
<p>In addition to generating sourcemaps, you can use the <em>-a</em> switch to annotate non-minified JavaScript files with comments, referring to the original Python file names and line numbers. So even if your browser doesn&#8217;t support sourcemaps, it&#8217;s easy to find back the original Python source code location from any JavaScript statement.</p>
<div class="literal-block-wrapper container" id="annotated-target-code-for-hello-py">
<div class="code-block-caption"><span class="caption-text">Annotated target code for hello.py</span><a class="headerlink" href="#annotated-target-code-for-hello-py" title="Permalink to this code">¶</a></div>
<div class="highlight-python"><div class="highlight"><pre>// ============ Source: D:/activ_tosh/geatec/transcrypt/transcrypt/demos/hello/hello.py ============

/* 000001 */    (function () {
/* 000001 */        var chain = __init__ (__world__.itertools).chain;
/* 000003 */        var SolarSystem = __class__ (&#39;SolarSystem&#39;, [object], {
/* 000021 */            get __init__ () {return __get__ (this, function (self) {
/* 000022 */                self.lineIndex = 0;
/* 000022 */            });},
/* 000024 */            get greet () {return __get__ (this, function (self) {
/* 000025 */                self.planet = self.planets [int (Math.random () * len (self.planets))];
/* 000026 */                document.getElementById (&#39;greet&#39;).innerHTML = &#39;Hello {}&#39;.format (self.planet [0]);
/* 000027 */                self.explain ();
/* 000027 */            });},
/* 000029 */            get explain () {return __get__ (this, function (self) {
/* 000031 */                document.getElementById (&#39;explain&#39;).innerHTML = self.lines [self.lineIndex].format (self.planet [0], self.planet [self.lineIndex + 1]);
/* 000033 */                self.lineIndex = (self.lineIndex + 1) % 3;
/* 000033 */            });}
/* 000033 */        });
/* 000004 */        SolarSystem.planets = function () {
/* 000004 */            var __accu0__ = [];
/* 000004 */            var __iter0__ = enumerate (tuple ([tuple ([&#39;Mercury&#39;, &#39;hot&#39;, 2240]), tuple ([&#39;Venus&#39;, &#39;sulphurous&#39;, 6052]), tuple ([&#39;Earth&#39;, &#39;fertile&#39;, 6378]), tuple ([&#39;Mars&#39;, &#39;reddish&#39;, 3397]), tuple ([&#39;Jupiter&#39;, &#39;stormy&#39;, 71492]), tuple ([&#39;Saturn&#39;, &#39;ringed&#39;, 60268]), tuple ([&#39;Uranus&#39;, &#39;cold&#39;, 25559]), tuple ([&#39;Neptune&#39;, &#39;very cold&#39;, 24766])]));
/* 000004 */            for (var __index0__ = 0; __index0__ &lt; __iter0__.length; __index0__++) {
/* 000012 */                var __left0__ = __iter0__ [__index0__];
/* 000012 */                var index = __left0__ [0];
/* 000012 */                var planet = __left0__ [1];
/* 000004 */                __accu0__.append (chain (planet, tuple ([index + 1])));
/* 000004 */            }
/* 000004 */            return __accu0__;
/* 000004 */        } ();
/* 000015 */        SolarSystem.lines = tuple ([&#39;{} is a {} planet&#39;, &#39;The radius of {} is {} km&#39;, &#39;{} is planet nr. {} counting from the sun&#39;]);
/* 000035 */        var solarSystem = SolarSystem ();
/* 000035 */        __pragma__ (&#39;&lt;use&gt;&#39; +
/* 000035 */            &#39;itertools&#39; +
/* 000035 */        &#39;&lt;/use&gt;&#39;)
/* 000035 */        __pragma__ (&#39;&lt;all&gt;&#39;)
/* 000035 */            __all__.SolarSystem = SolarSystem;
/* 000035 */            __all__.solarSystem = solarSystem;
/* 000035 */        __pragma__ (&#39;&lt;/all&gt;&#39;)
/* 000035 */    }) ();
/* 000035 */    return __all__;
</pre></div>
</div>
</div>
<p>Source code annotation only happens for Python sources, not for JavaScript-only modules, that have a trivial correspondence between non-minified target code and source code.</p>
</div>
</div>
<div class="section" id="compiling-for-node-js">
<h2>2.4. Compiling for node.js<a class="headerlink" href="#compiling-for-node-js" title="Permalink to this headline">¶</a></h2>
<p>Transcrypt will allow you to target <em>node.js</em> while writing your server code in Python.
This opens up the exploding world of node.js libraries from your favorite programming language.
In the <em>demo/nodejs_demo</em> subdirectory of the installation, you&#8217;ll find the following trivial example of a node.js server app:</p>
<div class="literal-block-wrapper container" id="using-node-js-from-transcrypt-is-trivial-including-the-use-of-require-to-tap-into-a-vast-set-of-libraries">
<div class="code-block-caption"><span class="caption-text">Using node.js from Transcrypt is trivial, including the use of &#8216;require&#8217; to tap into a vast set of libraries</span><a class="headerlink" href="#using-node-js-from-transcrypt-is-trivial-including-the-use-of-require-to-tap-into-a-vast-set-of-libraries" title="Permalink to this code">¶</a></div>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Compile with p. command line switch (see docs).</span>
<span class="c"># The example will be served at URL: http://localhost:8080 in your browser</span>

<span class="n">http</span> <span class="o">=</span> <span class="n">require</span> <span class="p">(</span><span class="s">&#39;http&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Demo</span><span class="p">:</span>
    <span class="n">texts</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s">&#39;Welcome to the world of node.js&#39;</span><span class="p">,</span>
        <span class="s">&#39;You can have your cake and eat it&#39;</span><span class="p">,</span>
        <span class="s">&#39;Use node</span><span class="se">\&#39;</span><span class="s">s ecosystem while programming in Python&#39;</span><span class="p">,</span>
        <span class="s">&#39;Using node.js from Transcrypt is easy&#39;</span><span class="p">,</span>
        <span class="s">&#39;Take a Python ride into the node.js world&#39;</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">port</span><span class="p">):</span>
        <span class="k">print</span> <span class="p">(</span><span class="s">&#39;Demo server started on port&#39;</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">server</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">createServer</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">serve</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">listen</span> <span class="p">(</span><span class="n">port</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oldIndex</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">newIndex</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        
    <span class="k">def</span> <span class="nf">serve</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
        <span class="n">response</span><span class="o">.</span><span class="n">writeHead</span> <span class="p">(</span><span class="mi">200</span><span class="p">)</span>
        
        <span class="k">print</span> <span class="p">(</span><span class="s">&#39;Serving page&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">newIndex</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">oldIndex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">newIndex</span> <span class="o">=</span> <span class="nb">int</span> <span class="p">(</span><span class="n">Math</span><span class="o">.</span><span class="n">random</span> <span class="p">()</span> <span class="o">*</span> <span class="nb">len</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oldIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">newIndex</span>
        
        <span class="n">response</span><span class="o">.</span><span class="n">end</span> <span class="p">(</span><span class="s">&#39;&lt;h1&gt;{}&lt;/h1&gt;&#39;</span><span class="o">.</span><span class="n">format</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">texts</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">newIndex</span><span class="p">]</span>
        <span class="p">))</span>

<span class="n">demo</span> <span class="o">=</span> <span class="n">Demo</span> <span class="p">(</span><span class="mi">8080</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Follow the steps below to run this demo:</p>
<ul class="simple">
<li>Install node.js from <em>https://nodejs.org</em></li>
<li>Open a node.js command prompt</li>
<li>Go to the <em>demo/nodejs_demo</em> directory</li>
<li>Compile the demo with <em>transcrypt -b -p .none nodejs_demo.py</em>, to generate an orphan module rather than a child of <em>window</em></li>
<li>Go to <em>demo/nodejs_demo/__javascript__</em> directory</li>
<li>Type <em>node nodejs_demo.js</em> (or <em>node nodejs_demo.min.js</em> if you want to run the minified version)</li>
<li>In your browser, view the result at <em>http://localhost:8080</em></li>
<li>Repeatedly reload the page to see the text change (Google Chrome may actually reload twice)</li>
</ul>
</div>
<div class="section" id="available-command-line-switches">
<span id="command-line-switches"></span><h2>2.5. Available command line switches<a class="headerlink" href="#available-command-line-switches" title="Permalink to this headline">¶</a></h2>
<p>The available command line switches will be shown if you run transcript -h.
They are specified in the source code of Transcrypt as follows:</p>
<div class="literal-block-wrapper container" id="transcrypt-command-line-switches-as-specified-in-module-orgs-transcrypt-utils-py">
<div class="code-block-caption"><span class="caption-text">Transcrypt command line switches as specified in module/orgs/transcrypt/utils.py</span><a class="headerlink" href="#transcrypt-command-line-switches-as-specified-in-module-orgs-transcrypt-utils-py" title="Permalink to this code">¶</a></div>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">CommandArgs</span><span class="p">:</span>      
    <span class="k">def</span> <span class="nf">parse</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span> <span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s">&#39;source&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s">&quot;.py file containing source code of main module&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s">&#39;-a&#39;</span><span class="p">,</span> <span class="s">&#39;--anno&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s">&quot;annotate target files that were compiled from Python with source file names and source line numbers&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s">&#39;-b&#39;</span><span class="p">,</span> <span class="s">&#39;--build&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s">&quot;rebuild all target files from scratch&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s">&#39;-c&#39;</span><span class="p">,</span> <span class="s">&#39;--check&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s">&quot;perform static check as part of compilation&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s">&#39;-d&#39;</span><span class="p">,</span> <span class="s">&#39;--dmap&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s">&quot;dump human readable source map&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s">&#39;-f&#39;</span><span class="p">,</span> <span class="s">&#39;--fcall&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s">&quot;enable fastcall mechanism by default. You can also use __pragma__ (&#39;fcal&#39;) and __pragma__ (</span><span class="se">\&#39;</span><span class="s">nofcall</span><span class="se">\&#39;</span><span class="s">)&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s">&#39;-i&#39;</span><span class="p">,</span> <span class="s">&#39;--iconv&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s">&quot;enable automatic conversion to iterable by default. DISADVISED, since it will result in a type check for each for-loop. Preferable use __pragma__ (&#39;iconv&#39;) and __pragma__ (</span><span class="se">\&#39;</span><span class="s">noiconv</span><span class="se">\&#39;</span><span class="s">) to enable automatic conversion locally&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s">&#39;-j&#39;</span><span class="p">,</span> <span class="s">&#39;--jskeys&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s">&quot;interpret {key: &#39;value&#39;} as {&#39;key&#39;: &#39;value&#39;} and forbid {key (): &#39;value&#39;}, as JavaScript does. DISADVISED, since it&#39;s less flexible than the Python interpretation. Use {&#39;key&#39;: &#39;value&#39;} explicitly if you want literal keys&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s">&#39;store_true&#39;</span><span class="p">)</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s">&#39;-k&#39;</span><span class="p">,</span> <span class="s">&#39;--kwargs&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s">&quot;enable keyword arguments by default. In general this is DISADVISED, use __pragma__ (&#39;kwargs&#39;) and __pragma__(&#39;nokwargs&#39;) locally instead to prevent bloated code&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s">&#39;-l&#39;</span><span class="p">,</span> <span class="s">&#39;--license&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s">&quot;show license&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s">&#39;-m&#39;</span><span class="p">,</span> <span class="s">&#39;--map&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s">&quot;generate source map&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s">&#39;-n&#39;</span><span class="p">,</span> <span class="s">&#39;--nomin&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s">&quot;no minification&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s">&#39;-o&#39;</span><span class="p">,</span> <span class="s">&#39;--opov&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s">&quot;enable operator overloading by default. In general this is DISADVISED, use __pragma__ (&#39;opov&#39;) and __pragma__(&#39;noopov&#39;) locally instead to prevent slow code&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s">&#39;-p&#39;</span><span class="p">,</span> <span class="s">&#39;--parent&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s">&quot;object that will hold module, default is window. Use -p .none to generate orphan module, e.g. for use in node.js. Use -p .user to generate module that has to be explicitly initialized by calling &lt;modulename&gt; (), e.g. after the full page has loaded&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s">&#39;-r&#39;</span><span class="p">,</span> <span class="s">&#39;--run&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s">&quot;run source file rather than compiling it&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s">&#39;-t&#39;</span><span class="p">,</span> <span class="s">&#39;--tree&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s">&quot;dump syntax tree&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s">&#39;-v&#39;</span><span class="p">,</span> <span class="s">&#39;--verbose&#39;</span><span class="p">,</span> <span class="n">help</span> <span class="o">=</span> <span class="s">&quot;show all messages&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s">&#39;store_true&#39;</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">update</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">parse_args</span> <span class="p">()</span> <span class="o">.</span><span class="n">__dict__</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">license</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">):</span>
            <span class="n">log</span> <span class="p">(</span><span class="bp">True</span><span class="p">,</span>  <span class="bp">self</span><span class="o">.</span><span class="n">argParser</span><span class="o">.</span><span class="n">format_usage</span> <span class="p">()</span> <span class="o">.</span><span class="n">capitalize</span> <span class="p">())</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">global</span> <span class="n">extraLines</span>
        <span class="n">extraLines</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c"># Make identifier __pragma__ known to static checker</span>
            <span class="c"># It was only known in JavaScript from __core__.mod.js, which the checker doesn&#39;t see</span>
            <span class="c"># __pragma__ (&#39;&lt;all&gt;&#39;) in JavaScript requires it to remain a function, as it was in the core</span>
            <span class="c"># It can&#39;t be skipped, since it has to precede __pragma__ (&#39;skip&#39;), to make the checker accept that</span>
            <span class="s">&#39;def __pragma__ (): pass&#39;</span><span class="p">,</span>
        
            <span class="c"># Make __include__ known to the static checker</span>
            <span class="s">&#39;__pragma__ (</span><span class="se">\&#39;</span><span class="s">skip</span><span class="se">\&#39;</span><span class="s">)&#39;</span><span class="p">,</span>            
            <span class="s">&#39;__new__ = __include__ = 0&#39;</span><span class="p">,</span>    
            <span class="s">&#39;__pragma__ (</span><span class="se">\&#39;</span><span class="s">noskip</span><span class="se">\&#39;</span><span class="s">)&#39;</span><span class="p">,</span>
            <span class="s">&#39;&#39;</span>
        <span class="p">]</span> <span class="k">if</span> <span class="n">commandArgs</span><span class="o">.</span><span class="n">check</span> <span class="k">else</span> <span class="p">[]</span>
        <span class="k">global</span> <span class="n">nrOfExtraLines</span>
        <span class="n">nrOfExtraLines</span> <span class="o">=</span> <span class="nb">max</span> <span class="p">(</span><span class="nb">len</span> <span class="p">(</span><span class="n">extraLines</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c"># Last line only serves to force linefeed</span>
        <span class="n">extraLines</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span> <span class="p">(</span><span class="n">extraLines</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>If static checking is enabled, insert dummy definitions of global JavaScript variables between <a class="reference internal" href="special_facilities.html#skipping-fragments"><span>__pragma__ (&#8216;skip&#8217;) and __pragma__ (&#8216;noskip&#8217;)</span></a> to prevent needless complaints of the checker. The static checks are geared towards avoiding false alarms, and mainly check undefined names and unused variables. Style checks are deliberately avoided.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo_sphinx.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Subjects</a></h3>
  <ul>
<li><a class="reference internal" href="#">2. Getting started</a><ul>
<li><a class="reference internal" href="#installation">2.1. Installation</a><ul>
<li><a class="reference internal" href="#troubleshooting-checklist">2.1.1. Troubleshooting checklist</a></li>
</ul>
</li>
<li><a class="reference internal" href="#your-first-transcrypt-program">2.2. Your first Transcrypt program</a></li>
<li><a class="reference internal" href="#using-sourcemaps-and-annotated-target-code">2.3. Using sourcemaps and annotated target code</a><ul>
<li><a class="reference internal" href="#sourcemaps">2.3.1. Sourcemaps</a></li>
<li><a class="reference internal" href="#annotated-target-code">2.3.2. Annotated target code</a></li>
</ul>
</li>
<li><a class="reference internal" href="#compiling-for-node-js">2.4. Compiling for node.js</a></li>
<li><a class="reference internal" href="#available-command-line-switches">2.5. Available command line switches</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="what_why.html"
                        title="previous chapter">1. Transcrypt: what and why</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="special_facilities.html"
                        title="next chapter">3. Special facilities</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/installation_use.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="special_facilities.html" title="3. Special facilities"
             >next</a> |</li>
        <li class="right" >
          <a href="what_why.html" title="1. Transcrypt: what and why"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Transcrypt 3.5.154 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Jacques de Hooge.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.3.
    </div>
  </body>
</html>